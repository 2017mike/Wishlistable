<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Log in to MyWishList</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
  <link rel="stylesheet" href="./assets/all.css">

  <style>
    body {
      background-color: gray;
    }
    
  </style>
</head>
<body>
  <div class="container">
    <div class="row">
      <div class="col m6  s12 white-text left">
        <h2 class="myFont">myWishList.io</h2>
  
      </div>
      <div class="z-depth-1 transparent   myLog  col s12 m6 "
        style="display: inline-block; padding: 32px 30px 0px 48px; border: 1px solid rgb(74, 74, 74); margin-top: 12px;">
        <h5 class="white-text center ">Login</h5>
        <form class="col s12 " method="post">
          <div class='row center-align'>
            <div class='col s12'>
            </div>
          </div>
          <div class='row'>
            <div class='input-field col s12'>
              <label for='email'></label>
              <input class='validate white-text myInput' name='email' id='username' />
              <p class="usernameField">username</p>
            </div>
          </div>
          <div class='row'>
            <div class='input-field col s12'>
              <input class='validate white-text myInput' type='password' name='password' id='password' />
              <label for='password'></label>
              <p class="usernameField">password</p>
            </div>
          </div>
          <br>
          <center>
            <div class='row'>
              <div class='col s12'></div>
              <div class='col s12'></div>
              <div class='col s12'></div>
              <div class='col s12'></div>
              <div class='col s12'></div>
              <a type='submit' name='btn_login' class='col s12 btn btn-large waves-effect black' id='login'>Log In</a>
  
              <div class='col s12'></div>
              <div class='col s12'></div>
              <div class='col s12'></div>
              <div class='col s12'></div>
              <div class='col s12'></div>
              <div class='col s12'></div>
  
              <a type='submit' name='btn_login' class='col s12 btn btn-large waves-effect black' id='register'
                href="register.html">Create Account</a>
              <div class='col s12'></div>
            </div>
          </center>
        </form>
      </div>
    </div>
  </div>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

<script>


  
  
  document.getElementById('login').addEventListener('click', event => {
    event.preventDefault()
    axios.post('/api/users/login', {
      username: document.getElementById('username').value,
      password: document.getElementById('password').value
    })
      .then(({ data: token }) => {
        if (token) {
          localStorage.setItem('token', token)
          window.location = '/'
        } else {
          alert('Invalid username or password')
        }
      })
      .catch(err => console.error(err))
  })

  </script>
</body>
</html>